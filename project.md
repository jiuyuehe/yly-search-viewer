# YLY Search Viewer é¡¹ç›®æ¶æ„æ–‡æ¡£

## é¡¹ç›®æ¦‚è¿°

åŸºäºVue3çš„ä¼ä¸šçº§æ–‡ä»¶æœç´¢å’Œé¢„è§ˆç³»ç»Ÿï¼Œé›†æˆAIå·¥å…·é“¾ï¼Œæä¾›å®Œæ•´çš„æ–‡æ¡£ç®¡ç†è§£å†³æ–¹æ¡ˆã€‚

## æ€»ä½“æ¶æ„

```
YLY Search Viewer
â”œâ”€â”€ é«˜çº§æœç´¢ç•Œé¢ (Advanced Search)
â”œâ”€â”€ æ–‡ä»¶é¢„è§ˆç•Œé¢ (File Preview) âœ… å·²å®ç°
â””â”€â”€ AI å·¥å…·é›†æˆ (AI Tools)
```

## åŠŸèƒ½æ¨¡å—è®¾è®¡

### 1. é«˜çº§æœç´¢ç•Œé¢ (AdvancedSearch.vue)

#### 1.1 å¸ƒå±€ç»“æ„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æœç´¢æ ‡é¢˜æ                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              â”‚          ä¸»æœç´¢æ¡†                     â”‚
â”‚   è¿‡æ»¤é¢æ¿    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚              â”‚  â”‚  èŠå¤©æœºå™¨äººé£æ ¼æœç´¢æ¡†           â”‚  â”‚
â”‚ - æ–‡ä»¶ç©ºé—´    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚ - åˆ›å»ºäººå‘˜    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - æ ‡ç­¾è¿‡æ»¤    â”‚        æœç´¢ç»“æœèšåˆæ ‡ç­¾               â”‚
â”‚ - æ ¼å¼è¿‡æ»¤    â”‚  [å…¨éƒ¨][æ–‡æ¡£][å›¾ç‰‡][å¤šåª’ä½“][å…¶ä»–]     â”‚
â”‚ - æ—¶é—´è¿‡æ»¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - å¤§å°è¿‡æ»¤    â”‚           æœç´¢ç»“æœåˆ—è¡¨                â”‚
â”‚ - ç‰ˆæœ¬è¿‡æ»¤    â”‚  â˜ æ–‡ä»¶å | å†…å®¹æ‘˜è¦ | è·¯å¾„ | è¯„åˆ†   â”‚
â”‚              â”‚  â˜ æ–‡ä»¶å | å†…å®¹æ‘˜è¦ | è·¯å¾„ | è¯„åˆ†   â”‚
â”‚ [å±•å¼€/æ”¶èµ·]   â”‚  â˜ æ–‡ä»¶å | å†…å®¹æ‘˜è¦ | è·¯å¾„ | è¯„åˆ†   â”‚
â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              â”‚    åˆ†é¡µæ§ä»¶ | [ä¸‹è½½] [å¯¼å‡º]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 1.2 ç»„ä»¶ç»“æ„
```typescript
// components/search/
â”œâ”€â”€ AdvancedSearch.vue           // ä¸»æœç´¢é¡µé¢
â”œâ”€â”€ SearchFilters.vue           // è¿‡æ»¤é¢æ¿
â”œâ”€â”€ SearchBox.vue               // æœç´¢æ¡†ç»„ä»¶
â”œâ”€â”€ SearchResults.vue           // ç»“æœåˆ—è¡¨
â”œâ”€â”€ SearchTabs.vue              // ç»“æœåˆ†ç±»æ ‡ç­¾
â””â”€â”€ SearchPagination.vue        // åˆ†é¡µç»„ä»¶
```

#### 1.3 æ•°æ®æµè®¾è®¡
```typescript
interface SearchState {
  query: string                 // æœç´¢æŸ¥è¯¢
  filters: SearchFilters        // è¿‡æ»¤æ¡ä»¶
  results: SearchResult[]       // æœç´¢ç»“æœ
  pagination: PaginationInfo    // åˆ†é¡µä¿¡æ¯
  selectedItems: string[]       // é€‰ä¸­é¡¹ç›®
  loading: boolean             // åŠ è½½çŠ¶æ€
}

interface SearchFilters {
  workspace: string[]          // æ–‡ä»¶ç©ºé—´
  authors: string[]            // åˆ›å»ºäººå‘˜
  tags: string[]               // æ ‡ç­¾
  formats: string[]            // æ ¼å¼
  dateRange: [Date, Date]      // æ—¶é—´èŒƒå›´
  sizeRange: [number, number]  // å¤§å°èŒƒå›´
  versions: string[]           // ç‰ˆæœ¬
}
```

### 2. æ–‡ä»¶é¢„è§ˆç•Œé¢ (FilePreview.vue) âœ… å·²å®ç°

#### 2.1 å¸ƒå±€ç»“æ„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Header: [å›¾æ ‡] æ–‡ä»¶æ ‡é¢˜ [æ§åˆ¶æŒ‰é’®] [æ“ä½œæŒ‰é’®]       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                   Content Area                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                 â”‚         â”‚                     â”‚ â”‚
â”‚ â”‚   æ–‡ä»¶é¢„è§ˆåŒº     â”‚ AIå·¥å…·æ  â”‚    æ–‡æœ¬æŠ½å–/ç¿»è¯‘     â”‚ â”‚
â”‚ â”‚                 â”‚  80px   â”‚      (å¯é€‰æ˜¾ç¤º)      â”‚ â”‚
â”‚ â”‚  - PDFé¢„è§ˆ      â”‚         â”‚                     â”‚ â”‚
â”‚ â”‚  - å›¾ç‰‡æŸ¥çœ‹      â”‚ [æ‘˜è¦] â”‚   - åŸæ–‡ç¼–è¾‘å™¨      â”‚ â”‚
â”‚ â”‚  - è§†é¢‘æ’­æ”¾      â”‚ [æ ‡ç­¾] â”‚   - ç¿»è¯‘ç¼–è¾‘å™¨      â”‚ â”‚
â”‚ â”‚  - Officeæ–‡æ¡£   â”‚ [å®ä½“] â”‚   - åŒæ­¥æ»šåŠ¨        â”‚ â”‚
â”‚ â”‚  - æ–‡æœ¬ç¼–è¾‘      â”‚ [æŠ½å–] â”‚                     â”‚ â”‚
â”‚ â”‚                 â”‚ [é—®ç­”] â”‚                     â”‚ â”‚
â”‚ â”‚                 â”‚ [ç¿»è¯‘] â”‚                     â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 2.2 å·²å®ç°ç»„ä»¶
```typescript
// âœ… å·²å®Œæˆçš„æ ¸å¿ƒç»„ä»¶
components/
â”œâ”€â”€ core/
â”‚   â””â”€â”€ FileViewer.vue          // ç»Ÿä¸€æ–‡ä»¶é¢„è§ˆç»„ä»¶
â””â”€â”€ preview/
    â”œâ”€â”€ ImagePreview.vue        // å›¾ç‰‡é¢„è§ˆ âœ…
    â”œâ”€â”€ PdfPreview.vue          // PDFé¢„è§ˆ âœ…
    â”œâ”€â”€ VideoPreview.vue        // è§†é¢‘æ’­æ”¾ âœ…
    â”œâ”€â”€ OfficePreview.vue       // Officeæ–‡æ¡£ âœ…
    â””â”€â”€ TextPreview.vue         // æ–‡æœ¬ç¼–è¾‘ âœ…
```

#### 2.3 å¾…å®ç°ç»„ä»¶
```typescript
// ğŸ“‹ å¾…å¼€å‘çš„AIå·¥å…·ç»„ä»¶
components/
â”œâ”€â”€ ai/
â”‚   â”œâ”€â”€ AISidebar.vue          // AIå·¥å…·ä¾§è¾¹æ 
â”‚   â”œâ”€â”€ SummaryPanel.vue       // æ‘˜è¦é¢æ¿
â”‚   â”œâ”€â”€ TagsPanel.vue          // æ ‡ç­¾é¢æ¿
â”‚   â”œâ”€â”€ EntityPanel.vue        // å®ä½“æŠ½å–é¢æ¿
â”‚   â”œâ”€â”€ CustomExtract.vue      // è‡ªå®šä¹‰æŠ½å–
â”‚   â”œâ”€â”€ QAPanel.vue            // é—®ç­”é¢æ¿
â”‚   â””â”€â”€ TranslationPanel.vue   // ç¿»è¯‘é¢æ¿
â””â”€â”€ text/
    â”œâ”€â”€ TextExtractor.vue      // æ–‡æœ¬æŠ½å–
    â””â”€â”€ TranslationEditor.vue  // ç¿»è¯‘ç¼–è¾‘å™¨
```

### 3. AI å·¥å…·é›†æˆ (AI Tools)

#### 3.1 AIå·¥å…·æ è®¾è®¡
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [æ‘˜è¦]  â”‚ â† ç‚¹å‡»å±•å¼€300pxå³ä¾§æ 
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [æ ‡ç­¾]  â”‚ â† æ˜¾ç¤ºæ–‡æ¡£æ ‡ç­¾
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [å®ä½“]  â”‚ â† NERä¿¡æ¯æå–
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [æŠ½å–]  â”‚ â† è‡ªå®šä¹‰ä¿¡æ¯æŠ½å–
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [é—®ç­”]  â”‚ â† æ–‡æ¡£é—®ç­”å¯¹è¯
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ç¿»è¯‘]  â”‚ â† è¿›å…¥ç¿»è¯‘æ¨¡å¼
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.2 AIæœåŠ¡æ¥å£è®¾è®¡
```typescript
// services/ai/
interface AIService {
  // æµå¼è¾“å‡ºæ¥å£
  generateSummary(docId: string): AsyncGenerator<string>
  extractTags(docId: string): AsyncGenerator<string[]>
  extractEntities(docId: string): AsyncGenerator<Entity[]>
  customExtract(docId: string, template: ExtractTemplate): AsyncGenerator<any>
  translateText(text: string, target: string): AsyncGenerator<string>
  
  // é—®ç­”æ¥å£
  chatWithDocument(docId: string, question: string): AsyncGenerator<string>
}
```

#### 3.3 çŠ¶æ€ç®¡ç†è®¾è®¡
```typescript
// stores/
â”œâ”€â”€ search.ts              // æœç´¢çŠ¶æ€ç®¡ç†
â”œâ”€â”€ preview.ts             // é¢„è§ˆçŠ¶æ€ç®¡ç†
â”œâ”€â”€ ai.ts                  // AIå·¥å…·çŠ¶æ€
â””â”€â”€ user.ts                // ç”¨æˆ·çŠ¶æ€

// AIçŠ¶æ€ç¤ºä¾‹
interface AIState {
  summary: {
    content: string
    loading: boolean
    error: string | null
  }
  tags: string[]
  entities: Entity[]
  customExtracts: Record<string, any>
  translations: Record<string, string>
  chatHistory: ChatMessage[]
}
```

## æŠ€æœ¯å®ç°æ–¹æ¡ˆ

### 1. å‰ç«¯æŠ€æœ¯æ ˆ âœ… å·²å®ç°

```json
{
  "framework": "Vue3 + Composition API",
  "build": "Vite",
  "ui": "Element Plus",
  "language": "TypeScript",
  "state": "Pinia",
  "http": "Axios",
  "preview": {
    "pdf": "PDF.js",
    "office": "vue-office",
    "video": "HLS.js",
    "text": "Milkdown (è®¡åˆ’ä¸­)"
  }
}
```

### 2. æµå¼è¾“å‡ºå®ç°

```typescript
// utils/stream.ts
class StreamHandler {
  async handleAIStream(
    endpoint: string, 
    payload: any, 
    onChunk: (chunk: string) => void
  ) {
    const response = await fetch(endpoint, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Accept': 'text/event-stream'
      },
      body: JSON.stringify(payload)
    })

    const reader = response.body?.getReader()
    const decoder = new TextDecoder()

    while (true) {
      const { done, value } = await reader!.read()
      if (done) break
      
      const chunk = decoder.decode(value)
      onChunk(chunk)
    }
  }
}
```

### 3. æƒé™ç®¡ç†ç³»ç»Ÿ

```typescript
// components/access/
â”œâ”€â”€ AccessRequest.vue        // æƒé™ç”³è¯·æ¨¡æ€æ¡†
â”œâ”€â”€ PermissionGuard.vue      // æƒé™å®ˆå«ç»„ä»¶
â””â”€â”€ AccessDenied.vue         // æ— æƒé™æç¤º

interface AccessRequest {
  fileId: string
  requestType: 'view' | 'edit' | 'download'
  reason: string
  urgency: 'low' | 'medium' | 'high'
}
```

## å“åº”å¼è®¾è®¡æ–¹æ¡ˆ

### 1. æ–­ç‚¹è®¾è®¡
```scss
$breakpoints: (
  'mobile': 768px,
  'tablet': 1024px,
  'desktop': 1200px,
  'wide': 1440px
);
```

### 2. å¸ƒå±€é€‚é…
```typescript
// Mobile (< 768px)
- å•æ å¸ƒå±€
- å·¥å…·æ æ”¶èµ·
- è§¦æ‘¸ä¼˜åŒ–

// Tablet (768px - 1024px)  
- åŒæ å¸ƒå±€
- ä¾§è¾¹æ å¯æŠ˜å 
- æ‰‹åŠ¿æ”¯æŒ

// Desktop (> 1024px)
- å¤šæ å¸ƒå±€
- å®Œæ•´åŠŸèƒ½æ˜¾ç¤º
- é”®ç›˜å¿«æ·é”®
```

## å¼€å‘é‡Œç¨‹ç¢‘

### Phase 1: æ–‡ä»¶é¢„è§ˆæ ¸å¿ƒ âœ… å·²å®Œæˆ
- [x] ç»Ÿä¸€æ–‡ä»¶é¢„è§ˆç»„ä»¶
- [x] å¤šæ ¼å¼æ”¯æŒ (PDF, å›¾ç‰‡, è§†é¢‘, Office, æ–‡æœ¬)
- [x] ä¸»é¢˜ç³»ç»Ÿ
- [x] TypeScript ç±»å‹å®šä¹‰
- [x] åŸºç¡€ç¤ºä¾‹åº”ç”¨

### Phase 2: AIå·¥å…·é›†æˆ ğŸ“‹ å¾…å¼€å‘
- [ ] AIå·¥å…·ä¾§è¾¹æ 
- [ ] æ‘˜è¦ç”Ÿæˆ (æµå¼è¾“å‡º)
- [ ] æ ‡ç­¾æå–
- [ ] å®ä½“è¯†åˆ« (NER)
- [ ] è‡ªå®šä¹‰ä¿¡æ¯æŠ½å–
- [ ] æ–‡æ¡£é—®ç­”

### Phase 3: æœç´¢ç³»ç»Ÿ ğŸ“‹ å¾…å¼€å‘
- [ ] é«˜çº§æœç´¢ç•Œé¢
- [ ] è¿‡æ»¤é¢æ¿
- [ ] æœç´¢ç»“æœå±•ç¤º
- [ ] åˆ†é¡µå’Œæ‰¹é‡æ“ä½œ

### Phase 4: ç³»ç»Ÿé›†æˆ ğŸ“‹ å¾…å¼€å‘
- [ ] æƒé™ç®¡ç†
- [ ] ç¿»è¯‘åŠŸèƒ½
- [ ] å“åº”å¼ä¼˜åŒ–
- [ ] æ€§èƒ½ä¼˜åŒ–

## æ–‡ä»¶ç»“æ„

```
src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ core/              âœ… æ ¸å¿ƒç»„ä»¶ (å·²å®Œæˆ)
â”‚   â”œâ”€â”€ preview/           âœ… é¢„è§ˆç»„ä»¶ (å·²å®Œæˆ)
â”‚   â”œâ”€â”€ search/            ğŸ“‹ æœç´¢ç»„ä»¶ (å¾…å¼€å‘)
â”‚   â”œâ”€â”€ ai/                ğŸ“‹ AIå·¥å…· (å¾…å¼€å‘)
â”‚   â”œâ”€â”€ text/              ğŸ“‹ æ–‡æœ¬å¤„ç† (å¾…å¼€å‘)
â”‚   â””â”€â”€ access/            ğŸ“‹ æƒé™ç®¡ç† (å¾…å¼€å‘)
â”œâ”€â”€ stores/                ğŸ“‹ çŠ¶æ€ç®¡ç† (å¾…å¼€å‘)
â”œâ”€â”€ services/              ğŸ“‹ APIæœåŠ¡ (å¾…å¼€å‘)
â”œâ”€â”€ utils/                 âœ… å·¥å…·å‡½æ•° (éƒ¨åˆ†å®Œæˆ)
â”œâ”€â”€ types/                 âœ… ç±»å‹å®šä¹‰ (å·²å®Œæˆ)
â””â”€â”€ styles/                âœ… æ ·å¼ç³»ç»Ÿ (å·²å®Œæˆ)
```

## æ€»ç»“

å½“å‰é¡¹ç›®å·²å®Œæˆäº†æ–‡ä»¶é¢„è§ˆç³»ç»Ÿçš„æ ¸å¿ƒåŠŸèƒ½ï¼Œå»ºç«‹äº†è‰¯å¥½çš„ç»„ä»¶æ¶æ„å’Œç±»å‹ç³»ç»Ÿã€‚ä¸‹ä¸€æ­¥éœ€è¦é‡ç‚¹å¼€å‘AIå·¥å…·é›†æˆå’Œæœç´¢åŠŸèƒ½ï¼Œæœ€ç»ˆå®ç°å®Œæ•´çš„ä¼ä¸šçº§æ–‡æ¡£ç®¡ç†ç³»ç»Ÿã€‚